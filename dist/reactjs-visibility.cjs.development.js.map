{"version":3,"file":"reactjs-visibility.cjs.development.js","sources":["../src/useVisibility.ts","../src/VisibilityObserver.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\ninterface useOnScreenInterface {\n  onChangeVisibility?: Function;\n  options?: IntersectionObserverInit;\n}\n\nconst useVisibility = (args: useOnScreenInterface) => {\n  const ref = useRef();\n  const [visible, setVisible] = useState<Boolean>(false);\n\n  const handleIntersectionObserver: IntersectionObserverCallback = ([\n    entry,\n  ]) => {\n    setVisible(entry.isIntersecting);\n    \n    if (args?.onChangeVisibility) {\n      args.onChangeVisibility(entry.isIntersecting)\n    }\n    \n  };\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleIntersectionObserver, args?.options);\n\n    if (ref.current) {\n      // @ts-ignore\n      observer.observe(ref.current);\n    }\n\n    return () => {\n      if (ref.current) {\n        // @ts-ignore\n        observer.unobserve(ref.current);\n      }\n    };\n  }, [ref]);\n\n  return { ref, visible };\n};\n\nexport default useVisibility;\n","import React from \"react\";\nimport useVisibility from \"./useVisibility\";\n\ninterface ObserverVisibilityComponentInterface {\n  onChangeVisibility: Function;\n  options: IntersectionObserverInit;\n  visible: Boolean;\n  children: React.ReactChildren;\n}\n\nconst VisibilityObserver = (props: ObserverVisibilityComponentInterface) => {\n  const handleOnScreen = (visible: boolean) => {\n    if (props.onChangeVisibility) {\n      props.onChangeVisibility(visible);\n    }\n  };\n\n  const { ref } = useVisibility({\n    options: props.options,\n    onChangeVisibility: handleOnScreen\n  });\n\n  return (\n    // @ts-ignore\n    <section ref={ref}>\n      {props.children}\n    </section>\n  );\n};\n\nexport default VisibilityObserver;\n"],"names":["useVisibility","args","ref","useRef","useState","visible","setVisible","handleIntersectionObserver","entry","isIntersecting","onChangeVisibility","useEffect","observer","IntersectionObserver","options","current","observe","unobserve","VisibilityObserver","props","handleOnScreen","React","children"],"mappings":";;;;;;;;;AAOA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD;AACpB,MAAMC,GAAG,GAAGC,YAAM,EAAlB;;kBAC8BC,cAAQ,CAAU,KAAV;MAA/BC;MAASC;;AAEhB,MAAMC,0BAA0B,GAAiC,SAA3DA,0BAA2D;QAC/DC;AAEAF,IAAAA,UAAU,CAACE,KAAK,CAACC,cAAP,CAAV;;AAEA,QAAIR,IAAJ,YAAIA,IAAI,CAAES,kBAAV,EAA8B;AAC5BT,MAAAA,IAAI,CAACS,kBAAL,CAAwBF,KAAK,CAACC,cAA9B;AACD;AAEF,GATD;;AAWAE,EAAAA,eAAS,CAAC;AACR,QAAMC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyBN,0BAAzB,EAAqDN,IAArD,oBAAqDA,IAAI,CAAEa,OAA3D,CAAjB;;AAEA,QAAIZ,GAAG,CAACa,OAAR,EAAiB;AACf;AACAH,MAAAA,QAAQ,CAACI,OAAT,CAAiBd,GAAG,CAACa,OAArB;AACD;;AAED,WAAO;AACL,UAAIb,GAAG,CAACa,OAAR,EAAiB;AACf;AACAH,QAAAA,QAAQ,CAACK,SAAT,CAAmBf,GAAG,CAACa,OAAvB;AACD;AACF,KALD;AAMD,GAdQ,EAcN,CAACb,GAAD,CAdM,CAAT;AAgBA,SAAO;AAAEA,IAAAA,GAAG,EAAHA,GAAF;AAAOG,IAAAA,OAAO,EAAPA;AAAP,GAAP;AACD,CAhCD;;ACGA,IAAMa,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD;AACzB,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACf,OAAD;AACrB,QAAIc,KAAK,CAACT,kBAAV,EAA8B;AAC5BS,MAAAA,KAAK,CAACT,kBAAN,CAAyBL,OAAzB;AACD;AACF,GAJD;;uBAMgBL,aAAa,CAAC;AAC5Bc,IAAAA,OAAO,EAAEK,KAAK,CAACL,OADa;AAE5BJ,IAAAA,kBAAkB,EAAEU;AAFQ,GAAD;MAArBlB,qBAAAA;;AAKR;AAEEmB,IAAAA,4BAAA,UAAA;AAASnB,MAAAA,GAAG,EAAEA;KAAd,EACGiB,KAAK,CAACG,QADT;AAFF;AAMD,CAlBD;;;;;"}