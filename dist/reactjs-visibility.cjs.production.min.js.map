{"version":3,"file":"reactjs-visibility.cjs.production.min.js","sources":["../src/useVisibility.ts","../src/VisibilityObserver.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\ninterface useOnScreenInterface {\n  onChangeVisibility?: Function;\n  options?: IntersectionObserverInit;\n}\n\nconst useVisibility = (args: useOnScreenInterface) => {\n  const ref = useRef();\n  const [visible, setVisible] = useState<Boolean>(false);\n\n  const handleIntersectionObserver: IntersectionObserverCallback = ([\n    entry,\n  ]) => {\n    setVisible(entry.isIntersecting);\n    \n    if (args?.onChangeVisibility) {\n      args.onChangeVisibility(entry.isIntersecting)\n    }\n    \n  };\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleIntersectionObserver, args?.options);\n\n    if (ref.current) {\n      // @ts-ignore\n      observer.observe(ref.current);\n    }\n\n    return () => {\n      if (ref.current) {\n        // @ts-ignore\n        observer.unobserve(ref.current);\n      }\n    };\n  }, [ref]);\n\n  return { ref, visible };\n};\n\nexport default useVisibility;\n","import React from \"react\";\nimport useVisibility from \"./useVisibility\";\n\ninterface ObserverVisibilityComponentInterface {\n  onChangeVisibility: Function;\n  options: IntersectionObserverInit;\n  visible: Boolean;\n  children: React.ReactChildren;\n}\n\nconst VisibilityObserver = (props: ObserverVisibilityComponentInterface) => {\n  const handleOnScreen = (visible: boolean) => {\n    if (props.onChangeVisibility) {\n      props.onChangeVisibility(visible);\n    }\n  };\n\n  const { ref } = useVisibility({\n    options: props.options,\n    onChangeVisibility: handleOnScreen\n  });\n\n  return (\n    // @ts-ignore\n    <section ref={ref}>\n      {props.children}\n    </section>\n  );\n};\n\nexport default VisibilityObserver;\n"],"names":["useVisibility","args","ref","useRef","useState","visible","setVisible","handleIntersectionObserver","entry","isIntersecting","onChangeVisibility","useEffect","observer","IntersectionObserver","options","current","observe","unobserve","props","React","children"],"mappings":"oJAOMA,EAAgB,SAACC,OACfC,EAAMC,aACkBC,YAAkB,GAAzCC,OAASC,OAEVC,EAA2D,gBAC/DC,OAEAF,EAAWE,EAAMC,sBAEbR,GAAAA,EAAMS,oBACRT,EAAKS,mBAAmBF,EAAMC,wBAKlCE,aAAU,eACFC,EAAW,IAAIC,qBAAqBN,QAA4BN,SAAAA,EAAMa,gBAExEZ,EAAIa,SAENH,EAASI,QAAQd,EAAIa,SAGhB,WACDb,EAAIa,SAENH,EAASK,UAAUf,EAAIa,YAG1B,CAACb,IAEG,CAAEA,IAAAA,EAAKG,QAAAA,+BC5BW,SAACa,SAOVlB,EAAc,CAC5Bc,QAASI,EAAMJ,QACfJ,mBARqB,SAACL,GAClBa,EAAMR,oBACRQ,EAAMR,mBAAmBL,aAW3Bc,2BAASjB,MAPHA,KAQHgB,EAAME"}